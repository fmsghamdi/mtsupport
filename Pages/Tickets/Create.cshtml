@page
@model MabatSupportSystem.Pages.Tickets.CreateModel
@using MabatSupportSystem
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<SharedResource> SharedLocalizer
@{
    ViewData["Title"] = SharedLocalizer["CreateTicket_Title"];
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="text-center mb-5">
                <h1 class="fw-bold text-primary">
                    @SharedLocalizer["CreateTicket_Title"] <i class="bi bi-ticket-perforated-fill"></i>
                </h1>
                <p class="text-muted">@SharedLocalizer["CreateTicket_Subtitle"]</p>
            </div>

            @if (Model.ErrorMessage != null)
            {
                <div class="alert alert-danger mb-4 shadow-sm" role="alert">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i> @Model.ErrorMessage
                </div>
            }

            <div class="card shadow-sm border-0 rounded-3">
                <div class="card-body p-4 p-md-5">
                    <form method="post">
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select asp-for="Ticket.Priority" class="form-select bg-light border-0" asp-items="Model.PriorityList">
                                    </select>
                                    <label asp-for="Ticket.Priority" class="text-muted">
                                        <i class="bi bi-flag-fill me-1"></i> @SharedLocalizer["Label_Priority"] <span class="text-danger">*</span>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <select asp-for="Ticket.CategoryId" class="form-select bg-light border-0" asp-items="Model.CategoryList">
                                        <option value="">@SharedLocalizer["Option_SelectCategory"]</option>
                                    </select>
                                    <label asp-for="Ticket.CategoryId" class="text-muted">
                                        <i class="bi bi-folder-fill me-1"></i> @SharedLocalizer["Label_Category"] <span class="text-danger">*</span>
                                    </label>
                                    <span asp-validation-for="Ticket.CategoryId" class="text-danger small"></span>
                                </div>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label asp-for="Ticket.Title" class="form-label fw-bold small text-muted text-uppercase">
                                @SharedLocalizer["Label_Title"] <span class="text-danger">*</span>
                            </label>
                            <div class="input-group">
                                <span class="input-group-text bg-white border-end-0"><i class="bi bi-pen"></i></span>
                                <input asp-for="Ticket.Title" class="form-control border-start-0" placeholder="@SharedLocalizer["Placeholder_Title"]" />
                            </div>
                            <div class="form-text"><i class="bi bi-info-circle"></i> @SharedLocalizer["Help_Title"]</div>
                            <span asp-validation-for="Ticket.Title" class="text-danger small"></span>
                        </div>

                        <div class="mb-4">
                            <label asp-for="Ticket.Description" class="form-label fw-bold small text-muted text-uppercase">
                                @SharedLocalizer["Label_Description"] <span class="text-danger">*</span>
                            </label>
                            <textarea asp-for="Ticket.Description" class="form-control" rows="6" placeholder="@SharedLocalizer["Placeholder_Description"]"></textarea>
                            <div class="form-text text-end"><i class="bi bi-lightbulb"></i> @SharedLocalizer["Help_Description"]</div>
                            <span asp-validation-for="Ticket.Description" class="text-danger small"></span>
                        </div>

                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text bg-light border-0"><i class="bi bi-person"></i></span>
                                    <div class="form-floating flex-grow-1">
                                        <input asp-for="Ticket.UserName" class="form-control border-0 bg-light" placeholder="@SharedLocalizer["Placeholder_YourName"]" />
                                        <label asp-for="Ticket.UserName">@SharedLocalizer["Label_YourName"]</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="input-group">
                                    <span class="input-group-text bg-white border-end-0"><i class="bi bi-bookmark"></i></span>
                                    <div class="form-floating flex-grow-1">
                                        <input asp-for="Ticket.BookingReferenceId" class="form-control border-start-0" placeholder="@SharedLocalizer["Placeholder_BookingRef"]" />
                                        <label asp-for="Ticket.BookingReferenceId">@SharedLocalizer["Label_BookingRef"]</label>
                                    </div>
                                </div>
                                <div class="form-text text-end small">@SharedLocalizer["Help_BookingRef"] <i class="bi bi-info-circle"></i></div>
                            </div>
                        </div>

                        <div class="alert alert-info border-0 d-flex align-items-center mb-4" role="alert">
                            <div class="me-3 display-6"><i class="bi bi-clock-history"></i></div>
                            <div>
                                <h6 class="alert-heading fw-bold mb-1">@SharedLocalizer["Section_TimeSlots"]</h6>
                                <div class="small">
                                    <span class="me-3"><i class="bi bi-moon-stars-fill text-primary"></i> <strong>@SharedLocalizer["TimeSlot_Overnight"]:</strong> @SharedLocalizer["TimeSlot_OvernightDetail"]</span>
                                    <span><i class="bi bi-check-circle-fill text-success"></i> <strong>@SharedLocalizer["TimeSlot_Hourly"]:</strong> @SharedLocalizer["TimeSlot_HourlyDetail"]</span>
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2 d-md-flex justify-content-md-between mt-5">
                            <a asp-page="./Index" class="btn btn-light btn-lg px-4 order-md-2">
                                @SharedLocalizer["Btn_Cancel"] <i class="bi bi-arrow-left ms-2"></i>
                            </a>
                            <button type="submit" class="btn btn-primary btn-lg px-5 order-md-1 shadow-sm">
                                <i class="bi bi-send-fill me-2"></i> @SharedLocalizer["Btn_Submit"]
                            </button>
                        </div>
                    </form>
                </div>
                <div class="card-footer bg-light p-4 text-center border-top-0 rounded-bottom-3">
                    <small class="text-muted fw-bold">@SharedLocalizer["Help_Box_Title"]</small>
                    <p class="mb-0 small text-muted">
                        @SharedLocalizer["Help_Box_Text"]
                        <i class="bi bi-question-circle text-primary ms-1"></i>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}